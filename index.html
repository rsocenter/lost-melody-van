
<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lost Melody Van</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.png" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').then(reg => {
        console.log("Service worker registered.", reg);
      });
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white font-sans">
  <div class="flex flex-col items-center p-4">
    <img src="poster.jpg" alt="Lost Melody Van" class="rounded-2xl shadow-xl max-w-xs mb-6">
    <h1 class="text-3xl font-bold mb-4">Lost Melody Van</h1>
    <audio id="audio" controls class="w-full max-w-md mb-4"></audio>
    <div id="buttons" class="space-y-3 w-full max-w-md"></div>
    <button onclick="installApp()" class="mt-6 bg-purple-700 text-white px-4 py-2 rounded-xl">App telepítése</button>
  </div>

  <script>
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });

    function installApp() {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(() => {
          deferredPrompt = null;
        });
      }
    }

    const songs = [
      "Baila Baby! (1).mp3",
      "Csak nosztalgia. (1).mp3",
      "Csókolózni egyedül. (1).mp3",
      "Fortuna kisasszony. (1).mp3",
      "Nem veszem be! (1).mp3",
      "Nosztalgia. (1).mp3",
      "Soy Libre. (1).mp3",
      "Soy libre pepperappabumm. (1).mp3",
      "Szerencse kisasszony. (1).mp3",
      "Ááhe! (1).mp3",
      "Őrült nyár! (1).mp3"
    ];

    const audio = document.getElementById('audio');
    const buttons = document.getElementById('buttons');

    function playSong(filename) {
      audio.src = filename;
      audio.play();
    }

    songs.forEach(filename => {
      const title = filename.replace('.mp3', '');
      const container = document.createElement('div');
      container.className = "flex items-center justify-between bg-gray-800 px-4 py-2 rounded-xl shadow";

      const button = document.createElement('button');
      button.textContent = title;
      button.className = "text-left font-semibold";
      button.onclick = () => playSong(filename);

      const tools = document.createElement('div');
      tools.className = "flex gap-2";

      const downloadLink = document.createElement('a');
      downloadLink.href = filename;
      downloadLink.download = filename;
      downloadLink.textContent = "⬇️";

      const shareBtn = document.createElement('button');
      shareBtn.textContent = "📤";
      shareBtn.onclick = () => {
        if (navigator.share) {
          navigator.share({ title, url: filename });
        } else {
          alert("A megosztás nem támogatott ezen az eszközön.");
        }
      };

      tools.appendChild(downloadLink);
      tools.appendChild(shareBtn);
      container.appendChild(button);
      container.appendChild(tools);
      buttons.appendChild(container);
    });
  </script>
</body>
</html>
